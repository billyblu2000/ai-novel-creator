# æ•°æ®åº“è®¾ç½®æŒ‡å—

## ğŸ—„ï¸ å½“å‰çŠ¶æ€

æ‚¨çš„åº”ç”¨å·²æˆåŠŸéƒ¨ç½²ï¼Œä½†æ•°æ®åº“è¡¨ç»“æ„è¿˜æœªåˆ›å»ºã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨æ„å»ºè¿‡ç¨‹ä¸­ç§»é™¤äº† `prisma db push` æ¥é¿å…æ„å»ºè¶…æ—¶ã€‚

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### æ–¹æ³•1: æ‰‹åŠ¨åˆå§‹åŒ–æ•°æ®åº“ï¼ˆæ¨èï¼‰

1. **åœ¨æœ¬åœ°è¿è¡Œæ•°æ®åº“è¿ç§»**ï¼š
   ```bash
   cd ai-novel-creator/backend
   npm run db:deploy
   ```

2. **æˆ–è€…ä½¿ç”¨Vercel CLI**ï¼š
   ```bash
   # å®‰è£…Vercel CLIï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
   npm i -g vercel
   
   # ç™»å½•å¹¶é“¾æ¥é¡¹ç›®
   vercel link
   
   # è¿è¡Œæ•°æ®åº“è¿ç§»
   vercel env pull .env.local
   npm run db:deploy
   ```

### æ–¹æ³•2: é€šè¿‡APIç«¯ç‚¹åˆå§‹åŒ–

æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªä¸€æ¬¡æ€§çš„åˆå§‹åŒ–ç«¯ç‚¹ï¼š

```typescript
// åœ¨ backend/src/index.ts ä¸­æ·»åŠ 
app.post('/api/init-db', async (req, res) => {
  try {
    // è¿™é‡Œä¼šè‡ªåŠ¨åˆ›å»ºè¡¨ç»“æ„ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
    await prisma.project.findMany();
    res.json({ message: 'Database initialized successfully' });
  } catch (error) {
    console.error('Database initialization error:', error);
    res.status(500).json({ error: 'Failed to initialize database' });
  }
});
```

ç„¶åè®¿é—®ï¼š`https://your-app.vercel.app/api/init-db`

### æ–¹æ³•3: æ¢å¤æ„å»ºæ—¶çš„æ•°æ®åº“æ¨é€

å¦‚æœæ‚¨æƒ³è¦åœ¨æ¯æ¬¡éƒ¨ç½²æ—¶è‡ªåŠ¨åˆ›å»ºè¡¨ç»“æ„ï¼š

```json
{
  "vercel-build": "npm run build && npx prisma generate && npx prisma db push"
}
```

**æ³¨æ„**ï¼šè¿™å¯èƒ½ä¼šå¯¼è‡´æ„å»ºè¶…æ—¶ï¼Œç‰¹åˆ«æ˜¯åœ¨æ•°æ®åº“è¿æ¥è¾ƒæ…¢æ—¶ã€‚

## ğŸ¯ æ¨èåšæ³•

1. **é¦–æ¬¡éƒ¨ç½²**ï¼šä½¿ç”¨æ–¹æ³•1æ‰‹åŠ¨åˆå§‹åŒ–æ•°æ®åº“
2. **åç»­éƒ¨ç½²**ï¼šä¿æŒå½“å‰çš„æ„å»ºé…ç½®ï¼ˆä¸åŒ…å«db pushï¼‰
3. **æ•°æ®åº“æ›´æ”¹**ï¼šåœ¨æœ¬åœ°æµ‹è¯•åæ‰‹åŠ¨è¿è¡Œè¿ç§»

## âœ… éªŒè¯æ•°æ®åº“

åˆå§‹åŒ–å®Œæˆåï¼Œæµ‹è¯•ä»¥ä¸‹ç«¯ç‚¹ï¼š
- `GET /api/health` - åº”è¯¥è¿”å› `{"status":"ok"}`
- `GET /api/projects` - åº”è¯¥è¿”å›ç©ºæ•°ç»„ `[]`
- `POST /api/projects` - åˆ›å»ºæµ‹è¯•é¡¹ç›®

## ğŸš¨ æ³¨æ„äº‹é¡¹

- Supabaseæ•°æ®åº“å·²ç»åˆ›å»ºï¼Œåªéœ€è¦åˆ›å»ºè¡¨ç»“æ„
- æ‰€æœ‰ç¯å¢ƒå˜é‡å·²æ­£ç¡®é…ç½®
- æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ä½¿ç”¨çš„æ˜¯ç›´è¿ç«¯å£ï¼ˆ5432ï¼‰è€Œä¸æ˜¯è¿æ¥æ± ç«¯å£ï¼ˆ6543ï¼‰